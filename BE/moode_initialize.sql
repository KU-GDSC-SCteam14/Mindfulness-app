CREATE DATABASE moode_db

USE moode_db

CREATE TABLE User (
User_ID BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
Name VARCHAR(100) NOT NULL,
Signup_date DATETIME NOT NULL,
is_Google BOOLEAN NOT NULL,
is_Apple BOOLEAN NOT NULL,
Provider_ID VARCHAR(255) NOT NULL,
Access_Token VARCHAR(512) NOT NULL,
Refresh_Token VARCHAR(512) NOT NULL,
Token_Expiry_Date DATETIME NOT NULL,
Profile_Picture_URL VARCHAR(512)
);

CREATE TABLE Mood (
Mood_ID BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
Mood_name VARCHAR(100) NOT NULL,
Mood_value_min DECIMAL(5,4) NOT NULL,
Mood_value_max DECIMAL(5,4) NOT NULL
);

CREATE TABLE Diary (
Diary_ID BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
User_ID BIGINT UNSIGNED NOT NULL,
Title VARCHAR(255) NOT NULL,
Content_1 MEDIUMTEXT NOT NULL,
Content_2 MEDIUMTEXT NOT NULL,
Content_3 MEDIUMTEXT NOT NULL,
Date DATETIME NOT NULL,
Mood_ID BIGINT UNSIGNED,
FOREIGN KEY (User_ID) REFERENCES User(User_ID),
FOREIGN KEY (Mood_ID) REFERENCES Mood(Mood_ID)
);

CREATE TABLE AI_Data (
AI_Data_ID BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
Diary_ID BIGINT UNSIGNED NOT NULL,
Keywords_Extract MEDIUMTEXT NOT NULL,
Mood_value DECIMAL(5,4) NOT NULL,
FOREIGN KEY (Diary_ID) REFERENCES Diary(Diary_ID)
);